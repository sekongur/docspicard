{"swagger":"2.0","info":{"description":"Servicio REST para aceptar Transacciones utilizando la pasarela de pagos Picard","version":"v1","title":"Picard API Service","contact":{"name":"Equipo Picard","url":"https://picard.globalia-corp.com","email":"tesoreria.sistemas@globalia-corp.com"},"license":{"name":"Globalia Sistemas License"}},"host":"10.153.0.34:8480","basePath":"/api","tags":[{"name":"transaction-controller","description":"Transaction Controller"}],"paths":{"/{version}/payment":{"post":{"tags":["transaction-controller"],"summary":"Crear Pago","operationId":"Crear Pago","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"version","in":"path","description":"version","required":true,"type":"string","enum":["v1"]},{"in":"body","name":"createPaymentRequest","description":"createPaymentRequest","required":true,"schema":{"$ref":"#/definitions/CreatePaymentRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PicardResponse"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/{version}/payment/{integrationCode}/{picardTransactionCode}":{"get":{"tags":["transaction-controller"],"summary":"Recuperar Pago","operationId":"Recuperar Pago","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"version","in":"path","description":"version","required":true,"type":"string","enum":["v1"]},{"name":"integrationCode","in":"path","description":"integrationCode","required":true,"type":"string"},{"name":"picardTransactionCode","in":"path","description":"picardTransactionCode","required":true,"type":"integer","format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PicardResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/{version}/payment/{integrationCode}/{picardTransactionCode}/{integrationTransactionCode}/refund":{"post":{"tags":["transaction-controller"],"summary":"Crear Devolucion","operationId":"Crear Devolucion","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"version","in":"path","description":"version","required":true,"type":"string","enum":["v1"]},{"name":"integrationCode","in":"path","description":"integrationCode","required":true,"type":"string"},{"name":"picardTransactionCode","in":"path","description":"picardTransactionCode","required":true,"type":"integer","format":"int32"},{"name":"integrationTransactionCode","in":"path","description":"integrationTransactionCode","required":true,"type":"string"},{"in":"body","name":"createRefundRequest","description":"createRefundRequest","required":true,"schema":{"$ref":"#/definitions/CreateRefundRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PicardResponse"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/{version}/refund/{integrationCode}/{picardTransactionCode}":{"get":{"tags":["transaction-controller"],"summary":"Recuperar Devolucion","operationId":"Recuperar Devolucion","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"version","in":"path","description":"version","required":true,"type":"string","enum":["v1"]},{"name":"integrationCode","in":"path","description":"integrationCode","required":true,"type":"string"},{"name":"picardTransactionCode","in":"path","description":"picardTransactionCode","required":true,"type":"integer","format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PicardResponse"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}}},"definitions":{"CardDetailsResponse":{"type":"object","required":["cardHash","expiryDate","maskedCardNumber"],"properties":{"cardHash":{"type":"string","description":"C&oacute;digo hash &uacute;nico para cada tarjeta de cr&eacute;dito"},"expiryDate":{"description":"Fecha de caducidad usada en la transacci&oacute;n","$ref":"#/definitions/ExpiryDate"},"maskedCardNumber":{"type":"string","description":"Tarjeta de cr&eacute;dito enmascarada con el formato ######******####"}}},"CreatePaymentRequest":{"type":"object","required":["amount","currency","integrationCode","integrationTransactionCode","transactionEnvironment"],"properties":{"agentCode":{"type":"string","description":"En agencias donde un operador realiza la transacci&oacute;n, puede ser especificado su n&uacute;mero de personal para tracear incidencias"},"amount":{"type":"number","description":"Importe de la transacci&oacute;n, en las devoluciones puede ser inferior al importe original"},"cardHash":{"type":"string","description":"C&oacute;digo hash de la tarjeta para utilizar la tarjeta almacenada"},"centerCode":{"type":"string","description":"C&oacute;digo de centro o agencia para identificar el lugar en el que se ha hecho la transacci&oacute;n, ser&aacute; proporcionado por el equipo de Tesorer&iacute;a"},"currency":{"type":"string","description":"Divisa en la que se debe realizar el pago"},"customerCode":{"type":"string","description":"C&oacute;digo de cliente para usar con las tarjetas almacenadas"},"customerIpAddress":{"type":"string","description":"Direcci&oacute;n IP del cliente para prevenir fraude y revisi&oacute;n de incidencias"},"customerLanguageCode":{"type":"string","description":"C&oacute;digo de idioma en ISO 639-1 que se utilizar&aacute; para devolver la descripci&oacute;n de los errores"},"encryptedCardDetails":{"type":"string","description":"Detalles de la tarjeta encriptados en con el algoritmo RSA y la clave p&uacute;blica proporcionada por el equipo de Picard"},"enhancedData":{"type":"array","description":"Informaci&oacute;n adicional sobre el pagador o la reserva, por favor pregunte al equipo de Picard si debe rellenar esta informaci&oacute;n","items":{"$ref":"#/definitions/EnhancedData"}},"installmentCode":{"type":"string","description":"C&oacute;digo de pago aplazado proporcionados por el equipo de Picard para dividir los pagos en mensualidades"},"integrationCode":{"type":"string","description":"C&oacute;digo de integraci&oacute;n proporcionado por el equipo de Tesorer&iacute;a"},"integrationTransactionCode":{"type":"string","description":"C&oacute;digo de transacci&oacute;n proporcionado por la integraci&oacute;n, debe ser &uacute;nico en cada pago finalizado, y se debe compartir con la devoluci&oacute;n"},"reference":{"type":"string","description":"Referencia del pago, si no se proporciona, Picard puede generarla autom&aacute;ticamente, pero s&oacute;lo para integraciones que se han configurado de esta manera"},"transactionEnvironment":{"type":"string","description":"Proporciona a Picard informaci&oacute;n sobre c&oacute;mo la integraci&oacute;n usa la pasarela de pagos","enum":["WEB","AGENCY","PRESENTIAL","CALLCENTER"]}}},"CreateRefundRequest":{"type":"object","required":["amount"],"properties":{"agentCode":{"type":"string","description":"En agencias donde un operador realiza la transacci&oacute;n, puede ser especificado su n&uacute;mero de personal para tracear incidencias"},"amount":{"type":"number","description":"Importe de la transacci&oacute;n, en las devoluciones puede ser inferior al importe original"},"cardHash":{"type":"string","description":"C&oacute;digo hash de la tarjeta para utilizar la tarjeta almacenada"},"centerCode":{"type":"string","description":"C&oacute;digo de centro o agencia para identificar el lugar en el que se ha hecho la transacci&oacute;n, ser&aacute; proporcionado por el equipo de Tesorer&iacute;a"},"comment":{"type":"string","description":"Comentarios sobre la causa de la devoluci&oacute;n, para informar al equipo de Tesorer&iacute;a"},"customerCode":{"type":"string","description":"C&oacute;digo de cliente para usar con las tarjetas almacenadas"},"customerIpAddress":{"type":"string","description":"Direcci&oacute;n IP del cliente para prevenir fraude y revisi&oacute;n de incidencias"},"customerLanguageCode":{"type":"string","description":"C&oacute;digo de idioma en ISO 639-1 que se utilizar&aacute; para devolver la descripci&oacute;n de los errores"},"encryptedCardDetails":{"type":"string","description":"Detalles de la tarjeta encriptados en con el algoritmo RSA y la clave p&uacute;blica proporcionada por el equipo de Picard"},"expiryDate":{"description":"Si se especifica, la tarjeta de cr&eacute;dito se obtendr&aacute; del pago original, pero se utilizar&aacute; esta caducidad, para el caso de que haya cambiado entre la fecha de la venta y la devoluci&oacute;n","$ref":"#/definitions/ExpiryDate"}}},"EnhancedData":{"type":"object"},"ExpiryDate":{"type":"object","properties":{"month":{"type":"integer","format":"int32"},"year":{"type":"integer","format":"int32"}}},"LinkRelated":{"type":"object","required":["href","method","rel"],"properties":{"href":{"type":"string","description":"URL para recuperar el objeto relacionado"},"method":{"type":"string","description":"M&eacute;todo HTTP que se debe utilizar","enum":["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS","TRACE"]},"rel":{"type":"string","description":"Relaci&oacute;n entre el objeto devuelto y el objeto que se obtendr&aacute; con este enlace"}}},"PicardExceptionCause":{"type":"object","properties":{"code":{"type":"string"},"httpStatus":{"type":"string","enum":["100","101","102","103","200","201","202","203","204","205","206","207","208","226","300","301","302","303","304","305","307","308","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","426","428","429","431","451","500","501","502","503","504","505","506","507","508","509","510","511"]}}},"PicardResponse":{"type":"object","properties":{"errorOriginator":{"type":"string","description":"Indica qui&eacute;n ha originado el error, si es INTEGRATION por favor revise los par&aacute;metros de entrada, si es PICARD por favor pregunte al equipo de Picard, si es GATEWAY pregunte al equipo de Tesorer&iacute;a","enum":["INTEGRATION","GATEWAY","PICARD"]},"links":{"type":"array","description":"Enlaces para realizar acciones adicionales sobre el resultado de la llamada al servicio","items":{"$ref":"#/definitions/LinkRelated"}},"result":{"description":"C&oacute;digo de resultado detallado con la informaci&oacute;n en caso de error","$ref":"#/definitions/PicardExceptionCause"},"resultDescription":{"type":"string","description":"Descripci&oacute;n del resultado"},"sessionId":{"type":"string","description":"C&oacute;digo de sesi&oacute;n para ayudar al equipo de Picard encontrar alguna incidencia"},"transaction":{"description":"Toda la informaci&oacute;n de la transacci&oacute;n, si hay alguna","$ref":"#/definitions/TransactionResponse"},"validationErrors":{"type":"array","description":"Listado de errores si hay alg&uacute;n valor que no tiene un formato correcto","items":{"$ref":"#/definitions/ValidationError"}}}},"TransactionResponse":{"type":"object","required":["agentCode","amount","cardDetails","centerCode","currencyCode","customerLanguageCode","date","gateway","gatewayResultCode","integrationCode","integrationTransactionCode","reference","societyCode","success","transactionType"],"properties":{"agentCode":{"type":"string","description":"En agencias donde un operador realiza la transacci&oacute;n, puede ser especificado su n&uacute;mero de personal para tracear incidencias"},"amount":{"type":"number","format":"double","description":"Importe de la transacci&oacute;n, en las devoluciones puede ser inferior al importe original"},"authorization":{"type":"string","description":"C&oacute;digo de autorizaci&oacute;n devuelto por la pasarela de pagos como resultado de la transacci&oacute;n"},"cardDetails":{"description":"Detalles de la tarjeta de cr&eacute;dito usada para realizar la transacci&oacute;n","$ref":"#/definitions/CardDetailsResponse"},"centerCode":{"type":"string","description":"C&oacute;digo de centro o agencia para identificar el lugar en el que se ha hecho la transacci&oacute;n, ser&aacute; proporcionado por el equipo de Tesorer&iacute;a"},"currencyCode":{"type":"string","description":"Divisa en la que se debe realizar el pago"},"customerCode":{"type":"string","description":"C&oacute;digo de cliente para usar con las tarjetas almacenadas"},"customerIpAddress":{"type":"string","description":"Direcci&oacute;n IP del cliente para prevenir fraude y revisi&oacute;n de incidencias"},"customerLanguageCode":{"type":"string","description":"C&oacute;digo de idioma en ISO 639-1 que se utilizar&aacute; para devolver la descripci&oacute;n de los errores"},"date":{"type":"string","description":"Fecha de la transacci&oacute;n en formato yyyy-MM-dd HH:mm:ss"},"enhancedData":{"type":"array","description":"Informaci&oacute;n adicional sobre el pagador o la reserva, por favor pregunte al equipo de Picard si debe rellenar esta informaci&oacute;n","items":{"$ref":"#/definitions/EnhancedData"}},"gateway":{"type":"string","description":"Pasarela de pagos que ha procesado la transacci&oacute;n","enum":["CONEXFLOW","GLOBAL_COLLECT","AMERICAN_EXPRESS","WIRECARD","PAYPAL","MAROC_TELECOMMERCE","REDSYS","PAYFLOW"]},"gatewayResultCode":{"type":"string","description":"C&oacute;digo de resultado devuelto por la pasarela de pagos con informaci&oacute;n detallada sobre la causa de los errores"},"gatewayTransactionCode":{"type":"string","description":"C&oacute;digo de transacci&oacute;n en la pasarela de pagos"},"installmentCode":{"type":"string","description":"C&oacute;digo de pago aplazado proporcionados por el equipo de Picard para dividir los pagos en mensualidades"},"integrationCode":{"type":"string","description":"C&oacute;digo de integraci&oacute;n proporcionado por el equipo de Tesorer&iacute;a"},"integrationTransactionCode":{"type":"string","description":"C&oacute;digo de transacci&oacute;n proporcionado por la integraci&oacute;n, debe ser &uacute;nico en cada pago finalizado, y se debe compartir con la devoluci&oacute;n"},"originalTransactionCode":{"type":"integer","format":"int32"},"picardTransactionCode":{"type":"integer","format":"int32","description":"C&oacute;digo de transacci&oacute;n en Picard, es &uacute;nico para cada transacci&oacute;n"},"reference":{"type":"string","description":"Referencia del pago, si no se proporciona, Picard puede generarla autom&aacute;ticamente, pero s&oacute;lo para integraciones que se han configurado de esta manera"},"societyCode":{"type":"string","description":"C&oacute;digo de sociedad en la que se ha realizado la transacci&oacute;n"},"success":{"type":"boolean","example":false,"description":"Devuelve TRUE si la transacci&oacute;n se ha completado, o FALSE si no"},"transactionType":{"type":"string","description":"Tipo de transacci&oacute;n para saber si se trata de un pago o una devoluci&oacute;n","enum":["PAYMENT","REFUND","VOID"]}}},"ValidationError":{"type":"object","properties":{"field":{"type":"string"},"reason":{"type":"string"}}}}}